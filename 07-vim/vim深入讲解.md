# 7.1 vim深入讲解
学习 vim 最主要的就是学习 vim 的快捷键与 vim 底部的命令行。因为不能使用鼠标，所有操作只能通过快捷键和命令完成，所以对于初学者来说很难。下面是 vim 会计键的两幅示意图，摘录自网上，作者不详，可以帮助记忆和查询。本节内容如下:
1. 认识 vim 的三种模式
2. vim 增删查改调转快捷键
3. vim 高级用法
4. vim 命令行与配置

![vim_images1](../images/7/vim-quick-01.png)

![vim_images2](../images/7/vim-quick-02.png)

## 1. 认识 vim 的三种模式
## vim 使用
vim [OPTION] .... FILE .....
- +#：打开文件后，光标定位到 \# 行，默认最后一行
- +/PATTERN: 打开文件后，光标处于 pattern 匹配到的第一行

vimtutor: 练习教程

### 模式转换
一般模式 -> 编辑模式
- I: 行首输入
- A: 行尾输入
- O: 上行插入新行
- c:
- C:

### 一般模式
- ZZ: 直接保存退出
- u: 撤销
- Ctrl + r: 取消撤销
- .: 重复上一次操作

## 2. vim 增删查改调转快捷键
#### 跳转
- 字符跳转：
    - h j k l
    - \#l: 向右跳过 \# 个字符
- 单词跳转
    - w
    - b
    - e
- 行首行尾跳转
    - ^
    - 0
    - $
- 行间跳转
    - \#G: 跳转到 \# 行
    - G: 跳转到行尾
    - gg: 行首
- 句间移动
    - )
    - (
- 段落移动
    - {
    - }

#### 字符编辑
- x: 删除光标处字符
- xp: 交换光标处及后面字符的位置
- d: 结合光标跳转字符，实现范围删除
    - d0
    - d$
    - 2dd: 删除整行
- r: 替换光标处的字符

#### 粘贴复制命令
- p: 下后
- P: 上前
- y: 使用与 d 类似


#### 改变命令
- c: 作用类似 d，但是操作完成会切换至编辑模式

#### 可视化模式
- v
- V

#### 翻屏
- Ctrl + f
- Ctrl + b
- Ctrl + d
- Ctrl + u

## 4. vim 命令行与配置
### 命令行模式
- :w /PATH: 另存为
- :100r /PATH：读取文件插入到100 行处
- 分隔符 / 可以使用 @ 或 \# 代替
- 地址定界:
    - 2
    - 2, 100
    - 2, +3
    - .:当前行
    - $: 最后一行
    - ., $-1
    - %：== 1, $
    - /part1/, /part2/: 两个模式匹配的中间行
    - \#, /part/
- 地址定界+命令
    - 1,20w: 另存1-20 行
    - 1,20d: 删除1-20 行
- 查找
    - /PATTERN
    - ?PATTERN
- 替换
    - :s/pattern/replace/修饰符
    - replace: 可以使用 \1,\2, &(表示查找到的所有内容)
    - 修饰符:
        - i:
        - g:
    - eg：
        - .,$s/r(..)t/R\1T/g
        - %s/linux/&er
        - 1,10s/how/HOW/g

### vim 配置
- /etc/vimrc: 全局
- ~/.vimrc: 个人
- :set number
- :set nonumber
- :set ai：自动缩进
- :set hlsearch: 高亮搜索
- :syntax on: 语法高亮
- :help : 显示帮助

## 3. vim 高级用法
### 多文件模式
- vim /tmp/{file1，file2}
- :next
- :prev
- :last
- :first
- :wall：保存所有
- :qall：退出所有

### 窗口分割
- vim -o FILE1 FILE2: 水平分割
- vim -O: 垂直分割
- Ctrl + w: 松开后，加箭头
- Ctrl + w, s: 水平分割当前文件
- Ctrl + w, v: 垂直分割当前文件
