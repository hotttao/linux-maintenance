# 13.3 系统状态查看

## 1. vmstat命令：
`vmstat  [options]  [delay [count]]`
- 作用: 查看虚拟内存使用状况
- 输出:
    - procs：
        - r：等待运行的进程的个数；CPU上等待运行的任务的队列长度；
        - b：处于不可中断睡眠态的进程个数；被阻塞的任务队列的长度；
    - memory：
        - swpd：交换内存使用总量；
        - free：空闲的物理内存总量；
        - buffer：用于buffer的内存总量；
        - cache：用于cache的内存总量；
    - swap
        - si：数据进入swap中的数据速率（kb/s）
        - so：数据离开swap的速率(kb/s)
    - io
        - bi：从块设备读入数据到系统的速度（kb/s）
        - bo：保存数据至块设备的速率（kb/s）
    - system
        - in：interrupts，中断速率，即每秒发生的中断次数；
        - cs：context switch, 上下文切换的速率，即每秒发生的进程切换次数；
    - cpu
        - us：user space，用户空间占用 cpu 比例
        - sy：system，内核空间占用 cpu 比例
        - id：idle，cpu 空闲比例
        - wa：wait，等待 I/O 完成，消耗的 cpu 时间比例
        - st: stolen，被虚拟化技术偷走的 cpu 时间比例
- 选项：
    -s：显示内存统计数据；类似于 cat /proc/meminfo

## 2. pmap命令：
`pmap [options] pid [...]`
- 作用: 显示进程虚拟内存到物理内存的映射关系表
- -x：显示详细格式的信息；
- 另一种查看方式：cat  /proc/PID/maps


## 3. dstat命令：
`dstat [-afv] [options..] [delay [count]]`            
- 作用: 统计系统资源的使用情况
- 常用选项：
    - -c， --cpu：显示cpu相关信息；
    - -C \#,\#,...,total
    - -d, --disk：显示磁盘的相关信息
    - -D sda,sdb,...,tobal
    - -g：显示page相关的速率数据；
    - -m：Memory的相关统计数据
    - -n：显示network 相关统计数据；
    - -p：显示process的相关统计数据；
    - -r：显示io请求的相关的统计数据；
    - -s：显示swapped的相关统计数据；
    - --tcp
    - --udp
    - --raw
    - --socket
    - --ipc
    - --top-cpu：显示最占用CPU的进程；
    - --top-io：最占用io的进程；
    - --top-mem：最占用内存的进程；
    - --top-lantency：延迟最大的进程；
