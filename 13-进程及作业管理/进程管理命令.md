# 13.2 进程管理命令
## 1. Linux系统上的进程查看及管理工具：
### 1.1 相关命令概述
1. pstree, ps, pidof, pgrep,
2. top, htop, glances, pmap, vmstat, dstat,
3. kill, pkill, job, bg, fg, nohup, nice, renice, killall, ...

### 1.2 Centos 进程管理版本差异
- CentOS 5:  SysV init
- CentOS 6：upstart
- CentOS 7：systemd

## 2. 进程静态查看与管理
### 2.1 pstree命令：
pstree  - display a tree of processes


### 2.2 ps命令：
#### /proc/：
- 作用: 伪文件系统，Linux 系统各进程的相关信息均保存在 /proc/PID  目录下的文件中
- /proc/sys/包含:
    - 内核参数：可设置其值从而调整内核运行特性的参数；
    - 状态变量：其用于输出内核中统计信息或状态信息，仅用于查看；

#### ps
report a snapshot of the current processes.
ps [options]：
- 启动进程的方式：
    - 系统启动过程中自动启动：与终端无关的进程；
    - 用户通过终端启动：与终端相关的进程；
- 选项：
    - -a：所有与终端相关的进程；
    - -x：所有与终端无关的进程；
    - -u：以用户为中心组织进程状态信息显示；    
    - -e：显示所有进程
    - -f：显示完整格式的进程信息
    - -F：显示完整格式的进程信息；
    - -H：以层级结构显示进程的相关信息；
    - -C： cpu utilization
    - -PSR：运行于哪颗CPU之上        
    - -U: 显示特定用户进程
1. 常用组合之一：aux
    - VSZ：虚拟内存集；
    - RSS：Resident Size，常驻内存集；
    - STAT：
        - R：running  
        - S：interruptable sleeping  
        - D：uninterruptable sleeping  
        - T：Stopped  
        - Z：zombie，僵尸进程
        - +：前台进程
        - l：多线程进程
        - N：低优先级进程
        - <：高优先级进程
        - s：session leader
2. 常用组合之二：-ef
3. 常用组合之三：-eFH
4. 常用组合之四：-eo, axo
    - -o  field1, field2,...：自定义要显示的字段列表，以逗号分隔；
    - 常用的field：pid, ni, pri, psr, pcpu, stat, comm, tty, ppid, rtprio
        - ni：nice值；
        - priority：priority, 优先级；
        - rtprio：real time priority，实时优先级；

### 2.3 pgrep, pkill命令：
look up or signal processes based on name and other attributes
pgrep [options] pattern  
pkill [options] pattern  
- -u uid：effective user，有效用户  
- -U uid：real user，实际用户
- -t  TERMINAL：与指定的终端相关的进程；
- -l：显示进程名；
- -a：显示完整格式的进程名；
- -P pid：显示此进程的子进程；

### 2.4 pidof命令：
- 作用: 根据进程名，取其pid；  


## 3. 实时动态命令
### 3.1 top命令：
- 作用: display Linux processes
- 排序：
    - P：以占据CPU百分比排序；
    - M：以占据内存百分比排序；
    - T：累积占用CPU时间排序；
- 首部信息：
    - uptime信息：l命令
    - tasks及cpu信息：t命令，CPU分别显示使用数字 1
    - 内存信息：m命令
- 退出命令：q
- 修改刷新时间间隔：s
- 终止指定的进程：k
- 选项：
    - -d \#：指定刷新时间间隔，默认为3秒；
    - -b：以批次方式显示；
    - -n \#：显示多少批次，与 -b 一起使用；

### 3.2 uptime命令：
- 作用:
    - 显示系统时间、运行时长及平均负载；
    - 过去1分钟、5分钟和15分钟的平均负载；
    - 等待运行的进程队列的长度；
- 注释: 显示内容即 top 命令的首部信息


### 3.3 htop命令：
- 选项：
    - -d \#：指定延迟时间间隔；
    - -u UserName：仅显示指定用户的进程；
    - -s COLUME：以指定字段进行排序；
- 子命令：
    - l：显示选定的进程打开的文件列表；
    - s：跟踪选定的进程的系统调用；
    - t：以层级关系显示各进程状态；
    - a：将选定的进程绑定至某指定的CPU核心；


## 5. kill 类命令
### 5.1 kill命令：
- 作用: 用于向进程发送信号，以实现对进程的管理；

#### 显示当前系统可用信号：
kill -l [signal]            
- 每个信号的标识方法有三种：
    1. 信号的数字标识；
    2. 信号的完整名称；
    3. 信号的简写名称；

#### 向进程发信号：
kill  [-s signal|-SIGNAL]  pid...
- 常用信号：
    - 1） SIGHUP：无须关闭进程而让其重读配置文件；
    - 2）SIGINT：终止正在运行的进程，相当于Ctrl+c
    - 9）SIGKILL：杀死运行中的进程；
    - 15）SIGTERM：终止运行中的进程；
    - 18）SIGCONT：
    - 19）SIGSTOP：

### 5.2 killall命令：
kill processes by name
killall  [-SIGNAL]  program
